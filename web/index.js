const players = {
  pageParams: {
    count: 25128,
    hasNext: true,
    page: 1,
    perPage: 20,
  },
  pages: [
    {
      _id: "6315e20056349e0011fe156e",
      club: {
        _id: "628f9d1bc7bf051be83d471a",
        name: "CSU ASE BUCURESTI",
        county: {
          code: "B",
          name: "București",
        },
      },
      status: "activ",
      visas: ["2022", "2023"],
      firstname: "RICHARD",
      lastname: "RAPPORT",
      card: "4004596",
      year: 1996,
      gender: "M",
      fide: "738590",
      title: "GM",
      civ: 2745,
      disability: false,
      cnp: "7960325400054",
      createdAt: "2022-09-05T11:48:16.608Z",
      __v: 0,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4004596-richard-rapport-20221110080156.jpeg",
      updatedAt: "2023-06-19T21:55:40.990Z",
      no: 1,
    },
    {
      _id: "6290f675c230954044cb4e81",
      club: {
        _id: "628f9d1bc7bf051be83d471a",
        name: "CSU ASE BUCURESTI",
        county: {
          code: "B",
          name: "București",
        },
      },
      status: "activ",
      visas: ["2022", "2021", "2020", "2023"],
      card: "4400136",
      lastname: "DEAC",
      firstname: "BOGDAN-DANIEL",
      gender: "M",
      year: 2001,
      fide: "1226380",
      title: "GM",
      civ: 2700,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4400136-bogdan-daniel-deac-20220517073642.jpeg",
      createdAt: "2022-05-27T16:04:05.348Z",
      __v: 0,
      cnp: "5011008385608",
      updatedAt: "2023-06-19T21:55:38.440Z",
      no: 2,
    },
    {
      _id: "63e369d1804cc10011448999",
      club: {
        _id: "628f9d1bc7bf051be83d471a",
        name: "CSU ASE BUCURESTI",
        county: {
          code: "B",
          name: "București",
        },
      },
      civ: 2684,
      status: "activ",
      visas: ["2023"],
      firstname: "KIRILL",
      lastname: "SHEVCHENKO",
      card: "4004747",
      year: 2002,
      gender: "M",
      fide: "14129574",
      title: "GM",
      disability: false,
      createdAt: "2023-02-08T09:22:25.282Z",
      __v: 0,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4004747-kirill-shevchenko-20230209071510.jpeg",
      updatedAt: "2023-06-19T21:55:43.415Z",
      no: 3,
    },
    {
      _id: "64a6ab912f29560011db2bef",
      club: {
        _id: "628f9d1bc7bf051be83d471a",
        name: "CSU ASE BUCURESTI",
        county: {
          code: "B",
          name: "București",
        },
      },
      fide: "4121830",
      title: "GM",
      civ: 2605,
      status: "activ",
      visas: ["2023"],
      year: 1979,
      email: "",
      card: "4005057",
      lastname: "MOTYLEV",
      firstname: "ALEXANDER",
      cnp: "",
      gender: "M",
      disability: false,
      createdAt: "2023-07-06T11:54:57.548Z",
      __v: 0,
      updatedAt: "2023-11-20T12:05:51.734Z",
      avatar: null,
      no: 4,
    },
    {
      _id: "6453a1a6ac776e001172a927",
      club: {
        _id: "628f9d1bc7bf051be83d4565",
        name: "ACS SAH CLUB VADOS ARAD",
        county: {
          code: "AR",
          name: "Arad",
        },
      },
      title: "GM",
      civ: 2598,
      status: "activ",
      visas: ["2023"],
      year: 1976,
      fide: "1202758",
      email: "",
      card: "4080001",
      lastname: "NISIPEANU",
      firstname: "LIVIU-DIETER",
      cnp: "",
      gender: "M",
      disability: false,
      createdAt: "2023-05-04T12:14:30.805Z",
      __v: 0,
      updatedAt: "2023-05-04T12:15:43.952Z",
      no: 5,
    },
    {
      _id: "6290f677c230954044cb6348",
      club: {
        _id: "628f9d1bc7bf051be83d471a",
        name: "CSU ASE BUCURESTI",
        county: {
          code: "B",
          name: "București",
        },
      },
      status: "activ",
      visas: ["2022", "2021", "2020", "2023"],
      card: "4000116",
      lastname: "LUPULESCU",
      firstname: "CONSTANTIN",
      gender: "M",
      year: 1984,
      fide: "1207822",
      title: "GM",
      civ: 2580,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4000116-constantin-lupulescu-20220517073757.jpeg",
      createdAt: "2022-05-27T16:04:07.558Z",
      __v: 0,
      cnp: "1840325430028",
      updatedAt: "2023-06-19T21:55:39.175Z",
      no: 6,
    },
    {
      _id: "6290f679c230954044cb719c",
      club: {
        _id: "628f9d1bc7bf051be83d471a",
        name: "CSU ASE BUCURESTI",
        county: {
          code: "B",
          name: "București",
        },
      },
      status: "activ",
      visas: ["2022", "2021", "2020", "2023"],
      card: "4370041",
      lastname: "PARLIGRAS",
      firstname: "MIRCEA-EMILIAN",
      gender: "M",
      year: 1980,
      fide: "1204297",
      title: "GM",
      civ: 2554,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4370041-mircea-emilian-parligras-20220517074106.jpeg",
      createdAt: "2022-05-27T16:04:09.102Z",
      __v: 0,
      updatedAt: "2023-06-19T21:55:39.640Z",
      no: 7,
    },
    {
      _id: "6290f674c230954044cb4648",
      club: {
        _id: "628f9d1bc7bf051be83d4956",
        name: "CLUBUL DE SAH AL MUNICIPIULUI BAIA MARE",
        county: {
          code: "MM",
          name: "Maramureș",
        },
      },
      status: "activ",
      visas: ["2023"],
      card: "4240015",
      lastname: "CHIRILA",
      firstname: "IOAN-CRISTIAN",
      gender: "M",
      year: 1991,
      fide: "1211668",
      title: "GM",
      civ: 2543,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4240015-ioan-cristian-chirila-20220517073831.jpeg",
      createdAt: "2022-05-27T16:04:04.247Z",
      __v: 0,
      updatedAt: "2023-06-19T21:55:38.179Z",
      no: 8,
    },
    {
      _id: "6290f67bc230954044cb8970",
      club: {
        county: {
          code: "IF",
          name: "Ilfov",
        },
        name: "ACS ARNIA CHESSIT",
        _id: "628f9d1bc7bf051be83d4908",
      },
      status: "activ",
      visas: ["2020"],
      card: "4000007",
      lastname: "VAJDA",
      firstname: "LEVENTE",
      gender: "M",
      year: 1981,
      fide: "1203975",
      title: "GM",
      civ: 2534,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4000007-levente-vajda-20220517074325.jpeg",
      createdAt: "2022-05-27T16:04:11.679Z",
      __v: 0,
      updatedAt: "2023-06-19T21:55:40.646Z",
      no: 9,
    },
    {
      _id: "6290f676c230954044cb5676",
      club: {
        _id: "628f9d1bc7bf051be83d4821",
        name: "CS SAH CLUB OLTENIA CRAIOVA",
        county: {
          code: "DJ",
          name: "Dolj",
        },
      },
      status: "activ",
      visas: ["2021", "2020", "2022", "2023"],
      card: "4400140",
      lastname: "GAVRILESCU",
      firstname: "DAVID",
      gender: "M",
      year: 2003,
      fide: "1227190",
      title: "GM",
      civ: 2527,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4400140-david-gavrilescu-20220517073736.jpeg",
      createdAt: "2022-05-27T16:04:06.237Z",
      __v: 0,
      cnp: "5030329450072",
      updatedAt: "2023-06-19T21:55:38.661Z",
      no: 10,
    },
    {
      _id: "6290f678c230954044cb6bd9",
      club: {
        _id: "628f9d1bc7bf051be83d46e2",
        name: "CS DINAMO BUCURESTI",
        county: {
          code: "B",
          name: "București",
        },
      },
      status: "activ",
      visas: ["2022", "2021", "2020", "2023", "2024"],
      card: "4220003",
      lastname: "NANU",
      firstname: "COSTICA-CIPRIAN",
      gender: "M",
      year: 1977,
      fide: "1204580",
      title: "GM",
      civ: 2521,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4220003-costica-ciprian-nanu-20220517073719.jpeg",
      createdAt: "2022-05-27T16:04:08.407Z",
      __v: 0,
      updatedAt: "2024-01-08T10:02:13.732Z",
      no: 11,
    },
    {
      _id: "6290f677c230954044cb5fcb",
      club: {
        _id: "628f9d1bc7bf051be83d471a",
        name: "CSU ASE BUCURESTI",
        county: {
          code: "B",
          name: "București",
        },
      },
      status: "activ",
      visas: ["2022", "2021", "2020", "2023"],
      card: "4000058",
      lastname: "JIANU",
      firstname: "VLAD-CRISTIAN",
      gender: "M",
      year: 1984,
      fide: "1208110",
      title: "GM",
      civ: 2512,
      createdAt: "2022-05-27T16:04:07.169Z",
      __v: 0,
      updatedAt: "2023-02-14T11:30:27.853Z",
      no: 12,
    },
    {
      _id: "6290f677c230954044cb6660",
      club: {
        county: {
          code: "TM",
          name: "Timiș",
        },
        name: "CSU UNIVERSITATEA DE VEST TIMISOARA",
        _id: "628f9d1bc7bf051be83d4a79",
      },
      status: "activ",
      visas: [],
      card: "4000031",
      lastname: "MATEUTA",
      firstname: "GABRIEL",
      gender: "M",
      year: 1980,
      fide: "1206370",
      title: "IM",
      civ: 2509,
      createdAt: "2022-05-27T16:04:07.902Z",
      __v: 0,
      cnp: "1800129460047",
      no: 13,
    },
    {
      _id: "6290f67ac230954044cb831e",
      club: {
        _id: "628f9d1bc7bf051be83d4908",
        name: "ACS ARNIA CHESSIT",
        county: {
          code: "IF",
          name: "Ilfov",
        },
      },
      status: "activ",
      visas: ["2022", "2021", "2020", "2023"],
      card: "4000035",
      lastname: "SZABO",
      firstname: "GERGELY-ANDRAS-GYULA",
      gender: "M",
      year: 1983,
      fide: "1205064",
      title: "GM",
      civ: 2504,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4000035-gergely-andras-gyula-szabo-20220517074255.jpeg",
      createdAt: "2022-05-27T16:04:10.939Z",
      __v: 0,
      cnp: "1830413410060",
      updatedAt: "2023-06-19T21:55:40.473Z",
      no: 14,
    },
    {
      _id: "6290f678c230954044cb6b10",
      club: {
        _id: "628f9d1bc7bf051be83d4908",
        name: "ACS ARNIA CHESSIT",
        county: {
          code: "IF",
          name: "Ilfov",
        },
      },
      status: "activ",
      visas: ["2021", "2020", "2022", "2023"],
      card: "4000120",
      lastname: "MURARIU",
      firstname: "ANDREI",
      gender: "M",
      year: 1986,
      fide: "1209272",
      title: "GM",
      civ: 2493,
      createdAt: "2022-05-27T16:04:08.349Z",
      __v: 0,
      cnp: "1860217270848",
      updatedAt: "2023-05-31T12:19:56.119Z",
      avatar: null,
      no: 15,
    },
    {
      _id: "6290f678c230954044cb6877",
      club: {
        _id: "628f9d1bc7bf051be83d4a79",
        name: "CSU UNIVERSITATEA DE VEST TIMISOARA",
        county: {
          code: "TM",
          name: "Timiș",
        },
      },
      status: "activ",
      visas: ["2022", "2021", "2020", "2023"],
      card: "4310035",
      lastname: "MIRON",
      firstname: "LUCIAN-COSTIN",
      gender: "M",
      year: 1987,
      fide: "1210920",
      title: "GM",
      civ: 2485,
      avatar:
        "https://chesscoders.fra1.digitaloceanspaces.com/frsah-portal/4310035-lucian-costin-miron-20220517074121.png",
      createdAt: "2022-05-27T16:04:08.034Z",
      __v: 0,
      updatedAt: "2023-06-19T21:55:39.341Z",
      no: 16,
    },
    {
      _id: "6290f677c230954044cb646c",
      club: {
        _id: "628f9d1bc7bf051be83d4a63",
        name: "CS STUDENTESC MEDICINA TIMISOARA",
        county: {
          code: "TM",
          name: "Timiș",
        },
      },
      status: "activ",
      visas: ["2022", "2021", "2020", "2023", "2024"],
      card: "4000029",
      lastname: "MANOLACHE",
      firstname: "MARIUS",
      gender: "M",
      year: 1973,
      fide: "1201530",
      title: "GM",
      civ: 2481,
      createdAt: "2022-05-27T16:04:07.633Z",
      __v: 0,
      updatedAt: "2024-01-25T12:51:32.142Z",
      no: 17,
    },
    {
      _id: "6290f672c230954044cb3d4f",
      club: {
        _id: "628f9d1bc7bf051be83d4956",
        name: "CLUBUL DE SAH AL MUNICIPIULUI BAIA MARE",
        county: {
          code: "MM",
          name: "Maramureș",
        },
      },
      status: "activ",
      visas: ["2022"],
      card: "4000168",
      lastname: "BARNAURE",
      firstname: "VLAD-VICTOR",
      gender: "M",
      year: 1986,
      fide: "1210610",
      title: "IM",
      civ: 2480,
      createdAt: "2022-05-27T16:04:02.898Z",
      __v: 0,
      updatedAt: "2022-06-15T09:46:15.888Z",
      no: 18,
    },
    {
      _id: "6290f674c230954044cb4ac7",
      club: {
        _id: "628f9d1bc7bf051be83d4557",
        name: "CSM UNIREA ALBA IULIA",
        county: {
          code: "AB",
          name: "Alba",
        },
      },
      status: "activ",
      visas: ["2022", "2021", "2020", "2023", "2024"],
      card: "4010082",
      lastname: "COSTACHI",
      firstname: "MIHNEA",
      gender: "M",
      year: 2000,
      fide: "1217518",
      title: "IM",
      civ: 2476,
      createdAt: "2022-05-27T16:04:04.905Z",
      __v: 0,
      updatedAt: "2024-01-15T10:15:43.815Z",
      no: 19,
    },
    {
      _id: "6290f672c230954044cb39c5",
      club: {
        _id: "628f9d1bc7bf051be83d49ed",
        name: "LPS SATU MARE",
        county: {
          code: "SM",
          name: "Satu Mare",
        },
      },
      status: "activ",
      visas: ["2021", "2020", "2022", "2023", "2024"],
      card: "4000014",
      lastname: "ARDELEAN",
      firstname: "GEORGE-CATALIN",
      gender: "M",
      year: 1981,
      fide: "1207091",
      title: "IM",
      civ: 2473,
      createdAt: "2022-05-27T16:04:02.301Z",
      __v: 0,
      updatedAt: "2024-01-04T12:36:55.384Z",
      no: 20,
    },
  ],
};

async function searchPlayers() {
  const searchValue = document.getElementById("search").value;
  if (searchValue.length > 2) {
    document.getElementById("results").innerHTML = "Searching for players...";
    // /api/players?search=${searchValue}
    const apiEndpoint = `https://portal.frsah.ro/api/public/players?search=${searchValue}`;

    try {
      const response = await fetch(apiEndpoint);
      const data = await response.json();
      if (data.pages && data.pages.length > 0) {
        displayPlayers(data.pages);
      } else {
        document.getElementById("results").innerHTML = "No players found.";
      }
    } catch (error) {
      console.error("Error fetching players:", error);
      document.getElementById("results").innerHTML = "Error fetching players.";
    }
  } else {
    document.getElementById("results").innerHTML = "";
  }

  displayPlayers(players.pages);
}

function displayPlayers(players) {
  const resultsDiv = document.getElementById("results");
  const downloadButton = document.getElementById("download-results");

  resultsDiv.innerHTML = ""; // Clear previous results

  // Check if there are players and update button state
  if (players.length > 0) {
    downloadButton.classList.remove("cursor-not-allowed");
    downloadButton.removeAttribute("disabled");
    downloadButton.classList.add("cursor-pointer");

    // Create and append the player elements to the resultsDiv
    players.forEach((player) => {
      const playerElement = document.createElement("div");
      playerElement.className =
        "p-4 mb-2 bg-white rounded shadow cursor-pointer";
      playerElement.innerHTML = `
        <p><strong>Name:</strong> ${player.firstname} ${player.lastname}</p>
        <p><strong>Club:</strong> ${player.club.name}</p>
        <p><strong>Title:</strong> ${player.title}</p>
        <p><strong>Gender:</strong> ${player.gender}</p>
        <p><strong>Status:</strong> ${player.status}</p>
        <!-- Add more player details here -->
      `;

      // Add click event for redirection
      playerElement.addEventListener("click", () => {
        // Replace 'playerPageURL' with the actual URL of the player
        window.location.href = `/player.html?playerId=${player._id}`;
      });

      resultsDiv.appendChild(playerElement);
    });
  } else {
    downloadButton.classList.add("cursor-not-allowed");
    downloadButton.setAttribute("disabled", "disabled");
    // Display a message indicating no results were found
    resultsDiv.innerHTML =
      "<p class='text-center text-dark'>No players found.</p>";
  }
}
