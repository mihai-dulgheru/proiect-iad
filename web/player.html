<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Player Profile</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,container-queries"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#FEBE98",
              secondary: "#A8DADC",
              accent: "#1D3557",
              light: "#F1FAEE",
              dark: "#505A5B",
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-light">
    <main>
      <section>
        <div class="container mx-auto p-4">
          <h1 class="text-4xl font-bold mb-6 text-dark">Player Profile</h1>
          <div
            id="playerProfile"
            class="flex flex-col md:flex-row bg-white p-4 rounded shadow-lg"
          >
            <!-- Player details will be loaded here -->
          </div>
        </div>
      </section>
    </main>

    <script>
      async function fetchPlayerData(playerId) {
        try {
          const response = await fetch(`/api/players/${playerId}`);
          const player = await response.json();
          displayPlayer(player);
        } catch (error) {
          console.error("Error fetching player data:", error);
          document.getElementById("playerProfile").innerHTML =
            "Error loading player data.";
        }
      }

      function displayPlayer(player) {
        const playerProfileDiv = document.getElementById("playerProfile");
        playerProfileDiv.innerHTML = `
          <img
            src="${player.avatar}"
            alt="${player.firstname} ${player.lastname}"
            class="w-48 h-48 rounded-full mx-auto md:mx-0 md:mr-8"
          />
          <div class="text-lg mt-4 md:mt-0">
            <p class="text-accent font-bold text-2xl">
              ${player.firstname} ${player.lastname}
            </p>
            <p class="text-dark">
              <strong>Club:</strong> ${player.club}
            </p>
            <p class="text-dark">
              <strong>Status:</strong> ${player.status}
            </p>
            <p class="text-dark">
              <strong>Title:</strong> ${player.title}
            </p>
            <p class="text-dark">
              <strong>FIDE ID:</strong> ${player.fide}
            </p>
            <p class="text-dark">
              <strong>Year:</strong> ${player.year}
            </p>
            <p class="text-dark">
              <strong>Gender:</strong> ${player.gender}
            </p>
          </div>
        `;
      }

      const queryParams = new URLSearchParams(window.location.search);
      const playerId = queryParams.get("playerId");
      if (playerId) {
        fetchPlayerData(playerId);
      } else {
        document.getElementById("playerProfile").innerHTML =
          "No player ID provided.";
      }
    </script>
  </body>
</html>
